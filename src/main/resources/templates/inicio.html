<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title>Tienda MISH</title>
  <link rel="stylesheet" th:href="@{/css/styles.css}" href="/css/styles.css">
</head>

<body class="inicio-page">
  <header class="header-bar">
    <div class="header-left">
      <a th:href="@{/perfil}" class="profile-link">
        <div class="profile-pic">P</div> <span class="header-username" style="margin-left: 5px; font-weight: bold;">
          <span th:if="${#authorization.expression('isAuthenticated()')}" th:text="${#authentication.name}">
            NombreUsuario
          </span>
          <span th:unless="${#authorization.expression('isAuthenticated()')}">
            Perfil
          </span>
        </span>
      </a>
    </div>

    <div class="search-bar">
      <input type="search" class="search-input" placeholder="Buscar">
    </div>

    <div class="header-right">
      <a th:href="@{/inbox}" class="icon-button inbox-icon">
        &#9993;
      </a>

      <a th:href="@{/settings}" class="icon-button">
        &nbsp; </a>
    </div>
  </header>

  <div class="container">
    <h1>Opciones</h1>
    <ul class="product-list">
      <li th:each="producto : ${productos}" class="product-item">
        <div class="product-image-placeholder">
          IMAGEN
        </div>
        <div class="product-name" th:text="${producto.nombre}">
          NOMBRE DE PRODUCTO
        </div>
        <div class="product-price" th:text="'$' + ${#numbers.formatDecimal(producto.precio, 0, 'POINT', 0, 'COMMA')}">
          $1000
        </div>
        <a th:href="@{'/product/' + ${producto.idProducto}}"
          style="color: blue; font-size: 0.8em; margin-top: 5px; display: inline-block; text-decoration: none; border-bottom: 1px dotted blue;">
          Ver Detalle
        </a>
      </li>
    </ul>
  </div>
  <div id="productModal" class="modal">
    <div class="modal-content">
      <span class="close-button" onclick="closeModal()">&times;</span>
      <h2>Publicar Nuevo Producto</h2>

      <form th:action="@{/products/add}" method="post">
        <div class="form-group">
          <label for="nombre">Nombre del Producto:</label>
          <input type="text" id="nombre" name="nombre" required>
        </div>
        <div class="form-group">
          <label for="descripcion">Descripci√≥n:</label>
          <textarea id="descripcion" name="descripcion" required></textarea>
        </div>
        <div class="form-group">
          <label for="precio">Precio ($):</label>
          <input type="number" id="precio" name="precio" min="1" step="1" placeholder="Ej: 10000" required>
        </div>
        <div class="form-group">
          <label for="imagen">URL de la Imagen (temporal):</label>
          <input type="text" id="imagen" name="imagenUrl">
        </div>

        <button type="submit" class="submit-button">Guardar Producto</button>
      </form>
    </div>
  </div>
  <a href="#" onclick="openModal(); return false;" class="floating-action-button">
    <span class="fab-icon">+</span>
  </a>
  <script>
    var modal = document.getElementById("productModal");
    function openModal() {
      modal.style.display = "block";
    }
    function closeModal() {
      modal.style.display = "none";
    }
    window.onclick = function (event) {
      if (event.target == modal) {
        closeModal();
      }
    }
  </script>
</body>

</html>